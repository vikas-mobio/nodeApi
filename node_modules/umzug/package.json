{
  "_args": [
    [
      {
        "raw": "umzug@^2.1.0",
        "scope": null,
        "escapedName": "umzug",
        "name": "umzug",
        "rawSpec": "^2.1.0",
        "spec": ">=2.1.0 <3.0.0",
        "type": "range"
      },
      "D:\\wamp64\\www\\js\\APINodejs\\node_modules\\sequelize-cli"
    ]
  ],
  "_from": "umzug@>=2.1.0 <3.0.0",
  "_id": "umzug@2.1.0",
  "_inCache": true,
  "_location": "/umzug",
  "_nodeVersion": "8.4.0",
  "_npmOperationalInternal": {
    "host": "s3://npm-registry-packages",
    "tmp": "tmp/umzug-2.1.0.tgz_1508955653994_0.29538550274446607"
  },
  "_npmUser": {
    "name": "pascal.pflaum",
    "email": "mail@pascalpflaum.de"
  },
  "_npmVersion": "5.4.1",
  "_phantomChildren": {},
  "_requested": {
    "raw": "umzug@^2.1.0",
    "scope": null,
    "escapedName": "umzug",
    "name": "umzug",
    "rawSpec": "^2.1.0",
    "spec": ">=2.1.0 <3.0.0",
    "type": "range"
  },
  "_requiredBy": [
    "/sequelize-cli"
  ],
  "_resolved": "https://registry.npmjs.org/umzug/-/umzug-2.1.0.tgz",
  "_shasum": "c49dd71c7c26d082a9c9d3592dc6dc92cf867761",
  "_shrinkwrap": null,
  "_spec": "umzug@^2.1.0",
  "_where": "D:\\wamp64\\www\\js\\APINodejs\\node_modules\\sequelize-cli",
  "author": {
    "name": "Sascha Depold",
    "email": "sascha@depold.com"
  },
  "bugs": {
    "url": "https://github.com/sequelize/umzug/issues"
  },
  "contributors": [
    {
      "name": "Jukka Hyytiälä",
      "email": "hyytiala.jukka@gmail.com"
    }
  ],
  "dependencies": {
    "babel-runtime": "^6.23.0",
    "bluebird": "^3.4.1",
    "lodash": "^4.17.0",
    "resolve": "^1.0.0"
  },
  "description": "Framework agnostic migration tool for Node.JS",
  "devDependencies": {
    "babel-cli": "^6.24.1",
    "babel-plugin-dynamic-import-node": "^1.1.0",
    "babel-plugin-syntax-dynamic-import": "^6.18.0",
    "babel-plugin-transform-object-rest-spread": "^6.23.0",
    "babel-plugin-transform-runtime": "^6.23.0",
    "babel-preset-env": "^1.4.0",
    "babel-register": "^6.24.1",
    "chai": "^3.5.0",
    "coffee-script": "^1.8.0",
    "eslint-config-standard": "^10.2.1",
    "eslint-plugin-import": "^2.7.0",
    "eslint-plugin-mocha": "^4.11.0",
    "eslint-plugin-node": "^5.2.0",
    "eslint-plugin-promise": "^3.5.0",
    "eslint-plugin-standard": "^3.0.1",
    "gulp": "^3.8.10",
    "gulp-babel": "^7.0.0",
    "gulp-eslint": "^4.0.0",
    "gulp-mocha": "^4.3.0",
    "mocha": "^3.5.3",
    "sequelize": "^3.30.4",
    "sinon": "^2.1.0",
    "sinon-chai": "^2.14.0",
    "sqlite3": "^3.1.13",
    "typescript": "^2.5.2",
    "yargs": "^8.0.1"
  },
  "directories": {},
  "dist": {
    "integrity": "sha512-BgT+ekpItEWaG+3JjLLj6yVTxw2wIH8Cr6JyKYIzukWAx9nzGhC6BGHb/IRMjpobMM1qtIrReATwLUjKpU2iOQ==",
    "shasum": "c49dd71c7c26d082a9c9d3592dc6dc92cf867761",
    "tarball": "https://registry.npmjs.org/umzug/-/umzug-2.1.0.tgz"
  },
  "engines": {
    "node": ">=4.0.0"
  },
  "gitHead": "e1f88e2b95a387f550325272137f07e22a1a690b",
  "homepage": "https://github.com/sequelize/umzug",
  "keywords": [
    "migrate",
    "migration",
    "migrations",
    "sequelize"
  ],
  "license": "MIT",
  "main": "lib/index.js",
  "maintainers": [
    {
      "name": "pascal.pflaum",
      "email": "mail@pascalpflaum.de"
    },
    {
      "name": "jukkah",
      "email": "hyytiala.jukka@gmail.com"
    },
    {
      "name": "sdepold",
      "email": "sascha@depold.com"
    }
  ],
  "name": "umzug",
  "optionalDependencies": {},
  "readme": "# Umzug [![Build Status](https://travis-ci.org/sequelize/umzug.svg?branch=master)](https://travis-ci.org/sequelize/umzug)\nThe *umzug* lib is a framework agnostic migration tool for Node.JS. The tool itself is not specifically related to databases but basically provides a clean API for running and rolling back tasks.\n\n## Persistence\nIn order to keep track of already executed tasks, *umzug* logs successfully executed migrations. This is done in order to allow rollbacks of tasks. There are multiple storage presets available, from which you can choose. Adding a custom is  super simple as well.\n\n## Storages\n\n### JSONStorage\nUsing the [JSONStorage](src/storages/JSONStorage.js) will create a JSON file which will contain an array with all the executed migrations. You can specify the path to the file. The default for that is `umzug.json` in the working directory of the process.\n\n#### Options\n\n```js\n{\n  // The path to the json storage.\n  // Defaults to process.cwd() + '/umzug.json';\n  path: process.cwd() + '/db/sequelize-meta.json'\n}\n```\n\n### SequelizeStorage\nUsing the [SequelizeStorage](src/storages/SequelizeStorage.js) will create a table in your SQL database called `SequelizeMeta` containing an entry for each executed migration. You will have to pass a configured instance of Sequelize or an existing Sequelize model. Optionally you can specify the model name, table name, or column name. All major Sequelize versions are supported.\n\n#### Options\n\n```js\n{\n  // The configured instance of Sequelize.\n  // Optional if `model` is passed.\n  sequelize: instance,\n\n  // The to be used Sequelize model.\n  // Must have column name matching `columnName` option\n  // Optional if `sequelize` is passed.\n  model: model,\n\n  // The name of the to be used model.\n  // Defaults to 'SequelizeMeta'\n  modelName: 'Schema',\n\n  // The name of table to create if `model` option is not supplied\n  // Defaults to `modelName`\n  tableName: 'Schema',\n\n  // The name of table column holding migration name.\n  // Defaults to 'name'.\n  columnName: 'migration',\n\n  // The type of the column holding migration name.\n  // Defaults to `Sequelize.STRING`\n  columnType: new Sequelize.STRING(100)\n}\n```\n\n### MongoDBStorage\nUsing the [SequelizeStorage](src/storages/MongoDBStorage.js) will create a collection in your MongoDB database called `migrations` containing an entry for each executed migration. You will have either to pass a MongoDB Driver Collection as `collection` property. Alternatively you can pass a established MongoDB Driver connection and a collection name.\n\n#### Options\n\n```js\n{\n  // a connection to target database established with MongoDB Driver\n  connection: MongoDBDriverConnection,\n\n  // name of migration collection in MongoDB\n  collectionName: 'migrations',\n\n  // reference to a MongoDB Driver collection\n  collection: MongoDBDriverCollection\n}\n```\n#### Events\n\nUmzug is an EventEmitter. Each of the following events will be called with `name, migration` as arguments. Events are a convenient place\nto implement application-specific logic that must run around each migration:\n\n* *migrating* - A migration is about to be executed.\n* *migrated* - A migration has successfully been executed.\n* *reverting* - A migration is about to be reverted.\n* *reverted* - A migration has successfully been reverted.\n\n### Storage\nIf want to run migrations without storing them anywhere, you can use the [Storage](src/storages/Storage.js).\n\n### Custom\nIn order to use custom storage, you have two options:\n\n#### Way 1: Pass instance to constructor\n\nYou can pass your storage instance to Umzug constructor.\n```js\nclass CustomStorage {\n  constructor(...) {...}\n  logMigration(...) {...}\n  unlogMigration(...) {...}\n  executed(...) {...}\n}\nlet umzug = new Umzug({ storage: new CustomStorage(...) })\n```\n\n#### Way 2: Require external module from npmjs.com\n\nCreate and publish a module which has to fulfill the following API. You can just pass the name of the module to the configuration and *umzug* will require it accordingly. The API that needs to be exposed looks like this:\n\n```js\nvar Bluebird = require('bluebird');\nvar redefine = require('redefine');\n\nmodule.exports = redefine.Class({\n  constructor: function ({ option1: 'defaultValue1' } = {}) {\n    this.option1 = option1;\n  },\n\n  logMigration: function (migrationName) {\n    return new Bluebird(function (resolve, reject) {\n      // This function logs a migration as executed.\n      // It will get called once a migration was\n      // executed successfully.\n    });\n  },\n\n  unlogMigration: function (migrationName) {\n    return new Bluebird(function (resolve, reject) {\n      // This function removes a previously logged migration.\n      // It will get called once a migration has been reverted.\n    });\n  },\n\n  executed: function () {\n    return new Bluebird(function (resolve, reject) {\n      // This function lists the names of the logged\n      // migrations. It will be used to calculate\n      // pending migrations. The result has to be an\n      // array with the names of the migration files.\n    });\n  }\n});\n```\n\n## Migrations\nMigrations are basically files that describe ways of executing and reverting tasks. In order to allow asynchronicity, tasks have return a Promise object which provides a `then` method.\n\n### Format\nA migration file ideally contains an `up` and a `down` method, which represent a function which achieves the task and a function that reverts a task. The file could look like this:\n\n```js\n'use strict';\n\nvar Bluebird = require('bluebird');\n\nmodule.exports = {\n  up: function () {\n    return new Bluebird(function (resolve, reject) {\n      // Describe how to achieve the task.\n      // Call resolve/reject at some point.\n    });\n  },\n\n  down: function () {\n    return new Bluebird(function (resolve, reject) {\n      // Describe how to revert the task.\n      // Call resolve/reject at some point.\n    });\n  }\n};\n```\n\n## Examples\n\n- [sequelize-migration-hello](https://github.com/abelnation/sequelize-migration-hello)\n\n## Usage\n\n### Installation\nThe *umzug* lib is available on npm:\n\n```js\nnpm install umzug\n```\n\n### API\nThe basic usage of *umzug* is as simple as that:\n\n```js\nvar Umzug = require('umzug');\nvar umzug = new Umzug({});\n\numzug.someMethod().then(function (result) {\n  // do something with the result\n});\n```\n\n#### Executing migrations\nThe `execute` method is a general purpose function that runs for every specified migrations the respective function.\n\n```js\numzug.execute({\n  migrations: ['some-id', 'some-other-id'],\n  method: 'up'\n}).then(function (migrations) {\n  // \"migrations\" will be an Array of all executed/reverted migrations.\n});\n```\n\n#### Getting all pending migrations\nYou can get a list of pending/not yet executed migrations like this:\n\n```js\numzug.pending().then(function (migrations) {\n  // \"migrations\" will be an Array with the names of\n  // pending migrations.\n});\n```\n\n#### Getting all executed migrations\nYou can get a list of already executed migrations like this:\n\n```js\numzug.executed().then(function (migrations) {\n  // \"migrations\" will be an Array of already executed migrations.\n});\n```\n\n#### Executing pending migrations\nThe `up` method can be used to execute all pending migrations.\n\n```js\numzug.up().then(function (migrations) {\n  // \"migrations\" will be an Array with the names of the\n  // executed migrations.\n});\n```\n\nIt is also possible to pass the name of a migration in order to just run the migrations from the current state to the passed migration name.\n\n```js\numzug.up({ to: '20141101203500-task' }).then(function (migrations) {});\n```\n\nYou also have the ability to choose to run migrations *from* a specific migration, excluding it:\n\n```js\numzug.up({ from: '20141101203500-task' }).then(function (migrations) {});\n```\n\nIn the above example umzug will execute all the pending migrations found **after** the specified migration. This is particularly usefull if you are using migrations on your native desktop application and you don't need to run past migrations on new installs while they need to run on updated installations.\n\nYou can combine `from` and `to` options to select a specific subset:\n\n```js\numzug.up({ from: '20141101203500-task', to: '20151201103412-items' }).then(function (migrations) {});\n```\n\nRunning specific migrations while ignoring the right order, can be done like this:\n\n```js\numzug.up({ migrations: ['20141101203500-task', '20141101203501-task-2'] });\n```\n\nThere are also shorthand version of that:\n\n```js\numzug.up('20141101203500-task'); // Runs just the passed migration\numzug.up(['20141101203500-task', '20141101203501-task-2']);\n```\n\nRunning\n\n#### Reverting executed migration\nThe `down` method can be used to revert the last executed migration.\n\n```js\numzug.down().then(function (migration) {\n  // \"migration\" will the name of the reverted migration.\n});\n```\n\nIt is possible to pass the name of a migration until which the migrations should be reverted. This allows the reverse of multiple migrations at once.\n\n```js\numzug.down({ to: '20141031080000-task' }).then(function (migrations) {\n  // \"migrations\" will be an Array with the names of all reverted migrations.\n});\n```\n\nTo revert all migrations, you can pass 0 as the `to` parameter:\n\n```js\numzug.down({ to: 0 });\n```\n\nReverting specific migrations while ignoring the right order, can be done like this:\n\n```js\numzug.down({ migrations: ['20141101203500-task', '20141101203501-task-2'] });\n```\n\nThere are also shorthand version of that:\n\n```js\numzug.down('20141101203500-task'); // Runs just the passed migration\numzug.down(['20141101203500-task', '20141101203501-task-2']);\n```\n\n### Configuration\n\nIt is possible to configure *umzug* instance via passing an object to the constructor. The possible options are:\n\n```js\n{\n  // The storage.\n  // Possible values: 'json', 'sequelize', an argument for `require()`, including absolute paths\n  storage: 'json',\n\n  // The options for the storage.\n  // Check the available storages for further details.\n  storageOptions: {},\n\n  // The logging function.\n  // A function that gets executed everytime migrations start and have ended.\n  logging: false,\n\n  // The name of the positive method in migrations.\n  upName: 'up',\n\n  // The name of the negative method in migrations.\n  downName: 'down',\n\n  migrations: {\n    // The params that gets passed to the migrations.\n    // Might be an array or a synchronous function which returns an array.\n    params: [],\n\n    // The path to the migrations directory.\n    path: 'migrations',\n\n    // The pattern that determines whether or not a file is a migration.\n    pattern: /^\\d+[\\w-]+\\.js$/,\n\n    // A function that receives and returns the to be executed function.\n    // This can be used to modify the function.\n    wrap: function (fun) { return fun; },\n    \n    // A function that maps a file path to a migration object in the form\n    // { up: Function, down: Function }. The default for this is to require(...)\n    // the file as javascript, but you can use this to transpile TypeScript,\n    // read raw sql etc.\n    // See https://github.com/sequelize/umzug/tree/master/test/fixtures\n    // for examples.\n    customResolver: function (sqlPath)  {\n        return { up: () => sequelize.query(require('fs').readFileSync(sqlPath, 'utf8')) }\n    }\n  }\n}\n```\n\n## License\nThe MIT License (MIT)\n\nCopyright (c) 2014-2017 Sequelize contributors\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/sequelize/umzug.git"
  },
  "scripts": {
    "build": "gulp build",
    "test": "gulp test"
  },
  "version": "2.1.0"
}
